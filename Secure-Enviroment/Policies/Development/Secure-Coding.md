# Secure Coding Techniques

### Source Code Flaws
Design flaws, inadequate code review, and poor configuration management contribute to source code security issues.
* Secure coding is the practice of following secure coding standards coupled with the use of testing tools to detect code vulnerabilties.

* Eliminating vulnerabilities during development can result in a two to three orders-of-magnitude reduction in the total cost of
repairing the code versus making the repairs afterwards.
www.cert.org/secure-coding/
* Positive security defines what is allowed and reject everything else (whitelisting).

### Insecure Consequences [Refresher]
One of the most exploitable coding flaws in the ability to inject malicious code, commands, or scripts.

| Attack | Description | Result |
|--------|-------------|--------|
| Injection |  Tricking an application into including Can result in database, schema, unintended commands In the data sent to an interpreter (e.g. OS, LDAP, SQL) | Can result in database, schema, account and / or operating system access. |
| Cross-Site Scripting | Injection of malicious code into a vulnerable web application or back-end end database that Will execute scripts in a victim's browser. | Can result in user session hijack, redirection to malware distribution site, or bypassing access controls. |

### Input Validation
Input validation is used to detect unauthorized input before it is processed by the application.
* Input validation should be applied to all input data.
* Syntactic validation enforces correct syntax of structured fields (e.g. SSN, date, currency symbol).
* Semantic validation enforce correctness of values (e.g. start date is before end date, price is within expected range).

### Client-Side vs. Server-Side Validation
There are two types of validation: server-side and client-side.
* Server-side validation takes place on the server, during a postback (roundtrip to a server).
* Client-side validation takes place in the browser and does not require a postback.
*  Client-side pros include faster response time and less overhead on the server. Client-side cons are that the browser must support the scripting language and can be bypassed by malicious code.
*  Where client-side and server-side validation types are used together, the validation on the server acts as a second barrier that stops malicious bypass of client-side validation.

### Improper Error Handling
Internal error messages such as stack traces, database dumps, and error codes reveal implementation details.
* Such details can provide hackers important clues on potential flaws in the site and such messages are also disturbing to normal users.
* Error responses should be designed that the output is helpful without revealing unnecessary details.
* Error handling include any errors that can be generated by user input or by internal components such as system calls, database queries, or any other internal functions.

### Secure Coding Practices
| Practice | Explanation |
|----------|-------------|
| Default Deny | Deny all except what is explicitly allowed. |
| Normalization | Convert data input to a standard format before processing (e.g. convert all text input to lowercase). |
| Stored Procedures | Restrict direct user access to a DB table by requiring that all commands use stored procedures. |
| Memory Management | Allocate sufficient memory for an object. Free dynamically allocated memory when do longer needed.|
| Dead Code | Fix or remove dead code. Dead code is source code that can never be executed in a program (condition impossible to satisfy).|
| Code Reuse "Third-party Libraries and SDKs" | Only reuse code that is known to be trusted. Only use libraries and SDKs that have been vetted and known to be trusted.|

### Source Code Practices
| Practice | Explanation |
|----------|-------------|
| Compiler | A compiler transforms code written in one language to anotherâ€” generally to create an executable program (runtime) |
| Decompiler | A decompiler attempts to take an executable program (runtime) and transform it back into source code (reverse engineering) |
| Encryption | Encryption make the code unreadable without the corresponding key Code must be decrypted when in runtime (execution) mode. |
| Obfuscation, Camouflage | Obfuscation is the act of making something difficult to understand. The intent of code obfuscation is to make tampering or reverse engineering difficult. Automated and manual techniques.
| Code Signing | Digitally signed code to confirm authenticity and integrity. |
